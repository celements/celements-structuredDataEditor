#**************************************************************
 * INPUT Parameters
 * $structDataEditorSpaceRef : editor layout space reference
***************************************************************#

#set($structDataEditorCfgDocRef = $services.model.resolveDocument('', 'default', $structDataEditorSpaceRef))
#set($structDataEditorSpace = $structDataEditorSpaceRef.name)
#if($isSuperAdmin)
<!--
  structDataEditorCfg: $!{services.model.serialize($structDataEditorCfgDocRef)}
-->
#end

## include CSS defined on struct layout
#set($structDataEditorCfgDoc = $services.modelAccess.getDocument($structDataEditorCfgDocRef))
#foreach($cssObj in $structDataEditorCfgDoc.getObjects('Skins.UserCSS'))
  #set($cssFile = $services.celementsweb.getSkinFile("$!cssObj.cssname", 'file'))
  #if ("$!cssFile" != '')
    <link rel="stylesheet" type="text/css" href="$!cssFile">
  #end
#end

#set($overwritePresCmCssClass = '')
#set($overwriteNavCMcssClass = 'cel_cm_structured_data_editor_element')
#set($emptyDictKeySuffix = '_strucured_data_editor')
#if("$!structDataEditorPresentationCount" == '')
  #set($structDataEditorPresentationCount = 0)
#end
#set($structDataEditorPresentationCount = $structDataEditorPresentationCount + 1)
#set($structDataEditorNav = $services.treeNode.getJavaNavigation('StructuredDataEditor'))
#set($structCmCssClass = $structDataEditorNav.getCssClass())
<div id="GP$!{structDataEditorPresentationCount}$!{contentDoc.getName()}:$!{structDataEditorSpace}:"##
 class="structDataEditor $!{structCmCssClass}">
#if($services.layout.canRenderLayout($structDataEditorSpaceRef))
  #set($layoutApi = $services.layout.getPageLayoutApiForRef($structDataEditorSpaceRef))
  #if($layoutApi.isEditorLayoutType())
    $services.layout.renderPageLayout($structDataEditorSpaceRef)
  #else
    <p>Wrong Editor Layout Type (${layoutApi.getLayoutType()}) for '${structDataEditorSpace}'!</p>
  #end
#else
  <p>Editor Layout for '${structDataEditorSpace}' is missing!</p>
#end
</div>
